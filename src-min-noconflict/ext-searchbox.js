ace.define("ace/ext/searchbox",[],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/lang"),s=e("../lib/event"),o=".ace_search {border-top: 0 none;overflow: hidden;margin: 0;padding: 4px 6px 0 4px;position: absolute;top: 0;line-height: 18px;line-height: 1rem;z-index: 99;white-space: normal;box-shadow: 0 1px 5px 0px gray;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form,.ace_replace_form {margin: 0 20px 4px 0;overflow: hidden;line-height: 1.9;}.ace_replace_form {margin-right: 0;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {border-radius: 3px 0 0 3px;border-right: 0 none;outline: 0;padding: 0;font-size: inherit;margin: 0;line-height: inherit;padding: 0 6px;min-width: 17em;vertical-align: top;min-height: 1.8em;box-sizing: content-box;}.ace_searchbtn {line-height: inherit;display: inline-block;padding: 0;border-right: 0 none;cursor: pointer;margin: 0;position: relative;width: 30px;height: 30px;line-height: 30px;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn_close {border-radius: 50%;border: 0 none;cursor: pointer;font: 16px/16px Arial;padding: 0;height: 14px;width: 14px;top: 9px;right: 7px;position: absolute;}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100, 100, 100, 0.23);padding: 1px;box-sizing: border-box!important;}.ace_button.checked {opacity: 1;}.ace_search_options {margin: 0px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;clear: both;}.ace_search_counter {float: left;font-family: arial;padding: 0 8px;}",u=e("../keyboard/hash_handler").HashHandler,a=e("../lib/keys"),f=999;r.importCssString(o,"ace_searchbox");var l=function(e,t,n){var i=r.createElement("div");r.buildDom(["div",{"class":"ace_search"},["span",{action:"hide","class":"ace_searchbtn_close material-icons"},"close"],["table",{},["tr",{"class":"ace_search_form"},["td",{},["input",{"class":"ace_search_field",placeholder:"Search for",spellcheck:"false"}]],["td",{},["span",{action:"findPrev","class":"ace_searchbtn prev material-icons"},"keyboard_arrow_left"],["span",{action:"findNext","class":"ace_searchbtn next material-icons"},"keyboard_arrow_right"],["span",{action:"findAll","class":"ace_searchbtn material-icons",title:"Alt-Enter"},"format_align_justify"]]],["tr",{"class":"ace_replace_form"},["td",{},["input",{"class":"ace_search_field",placeholder:"Replace with",spellcheck:"false"}]],["td",{},["span",{action:"replaceAndFindNext","class":"ace_searchbtn material-icons"},"find_replace"],["span",{action:"replaceAll","class":"ace_searchbtn material-icons"},"format_align_justify"]]]],["div",{"class":"ace_search_options"},["span",{action:"toggleReplace","class":"ace_button material-icons",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},""],["span",{"class":"ace_search_counter"}],["span",{action:"toggleRegexpMode","class":"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive","class":"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords","class":"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection","class":"ace_button",title:"Search In Selection"},"S"]]],i),this.element=i.firstChild,this.setSession=this.setSession.bind(this),this.searchHistory=new this.History,this.$init(),this.setEditor(e),r.importCssString(o,"ace_searchbox",e.container)};(function(){this.History=function(){this.items=[],this.popItems=[],this.currentItem=null},Object.assign(this.History.prototype,{hasNext:function(){return this.popItems.length},hasPrev:function(){return this.items.length?this.dir?this.items.length:this.items.length-1:0},prev:function(){var e=this.items.pop();if(!e)return;return this.popItems.unshift(e),this.dir>-1?(this.dir=-1,this.prev()):e},next:function(){var e=this.popItems.shift();if(!e)return;return this.items.push(e),this.dir<1?(this.dir=1,this.next()):e},modify:function(e,t){e=e||this.create(t),this.hasNext()||this.currentItem===null?(this.push(e),this.currentItem=this.items[this.items.length-1]):(e.search&&(this.currentItem.search=e.search),e.replace&&(this.currentItem.replace=e.replace))},create:function(e){return{search:e.searchInput.value,replace:e.replaceInput.value}},push:function(e,t){e=e||this.create(t),this.items=this.items.concat(this.popItems),this.currentItem=null,this.popItems=[],this.dir=0,this.canPush(this.items[this.items.length-1],e)&&this.items.push(e)},canPush:function(e,t){return t.search&&(!e||e.search!=t.search||e.replace!=t.replace)}}),this.setEditor=function(e){var t=!1;e.searchBox=this,this.editor&&this.active&&(t=!0,this.hide()),e.container.appendChild(this.element),this.editor=e,t&&this.show()},this.allowedCommands=[],this.setSession=function(e){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(e){this.element.style.display="none",this.searchBox=e.querySelector(".ace_search_form"),this.replaceBox=e.querySelector(".ace_replace_form"),this.searchOption=e.querySelector("[action=searchInSelection]"),this.replaceOption=e.querySelector("[action=toggleReplace]"),this.regExpOption=e.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=e.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=e.querySelector(".ace_search_counter")},this.$init=function(){function n(e){e.target.focus()}var e=this.element;this.$initElements(e);var t=this;s.addListener(e,"touchstart",s.stopPropagation),s.addListener(e,"dragstart",s.stopPropagation),s.addListener(e,"dragenter",s.stopPropagation),s.addListener(e,"dragover",s.stopPropagation),s.addListener(e,"drop",s.stopPropagation),s.addListener(e,"contextmenu",s.stopPropagation),s.addListener(e,"touchmove",s.stopPropagation),s.addListener(e,"touchend",s.stopPropagation),s.addListener(e,"mousedown",function(e){var r;document.activeElement&&document.activeElement!=document.body?r=document.activeElement:r=t.activeInput,r&&e.target!=t.searchInput&&e.target!=t.replaceInput&&(setTimeout(function(){document.activeElement!=r&&r.focus(),s.removeListener(r,"blur",n)},0),s.addListener(r,"blur",n)),s.stopPropagation(e)}),s.addListener(e,"click",function(e){var n=e.target||e.srcElement,r=n.getAttribute("action");r&&t[r]?t[r]():t.$searchBarKb.commands[r]&&t.$searchBarKb.commands[r].exec(t),s.stopPropagation(e)}),s.addCommandKeyListener(e,function(e,n,r){var i=a.keyCodeToString(r),o=t.$searchBarKb.findKeyCommand(n,i);o&&o.exec?(o.exec(t),s.stopEvent(e)):(o=t.editor.commands.findKeyCommand(n,i),o&&o.exec&&t.allowedCommands.indexOf(o.name)>-1&&(o.exec(t.editor),s.stopEvent(e)))}),this.$onChange=i.delayedCall(function(){t.find(!1,!1)}),s.addListener(this.searchInput,"input",function(){t.$onChange.schedule(20),t.searchHistory.modify(0,t)}),s.addListener(this.searchInput,"focus",function(){t.activeInput=t.searchInput,t.searchInput.value&&t.highlight()}),s.addListener(this.replaceInput,"focus",function(){t.activeInput=t.replaceInput,t.searchInput.value&&t.highlight()})},this.$closeSearchBarKb=new u([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]),this.$searchBarKb=new u,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none",e.replaceOption.checked=!1,e.$syncOptions(),e.searchInput.focus()},"Ctrl-H|Command-Option-F":function(e){if(e.editor.getReadOnly())return;e.replaceOption.checked=!0,e.$syncOptions(),e.replaceInput.focus()},"Ctrl-G|Command-G":function(e){e.findNext()},Up:function(e){if(e.activeInput==e.replaceInput)e.searchInput.focus();else if(e.searchHistory.hasPrev()){var t=e.searchHistory.prev();e.searchInput.value=t.search,t.replace&&(e.replaceOption.checked=!0,e.replaceInput.value=t.replace)}},Down:function(e){if(e.activeInput==e.searchInput){if(e.searchHistory.hasNext()){var t=e.searchHistory.next();e.searchInput.value=t.search,t.replace&&(e.replaceOption.checked=!0,e.replaceInput.value=t.replace);return}if(e.replaceOption.checked){e.replaceInput.focus();return}}e.editor.focus()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout(function(){e.hide()})},Return:function(e){e.activeInput==e.replaceInput&&e.replace(),e.findNext(),e.searchHistory.push(0,e)},"Shift-Return":function(e){e.activeInput==e.replaceInput&&e.replace(),e.findPrev()},"Alt-Return":function(e){e.activeInput==e.replaceInput&&e.replaceAll(),e.findAll()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked,e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked,e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked,e.$syncOptions()}},{name:"toggleReplace",exec:function(e){e.replaceOption.checked=!e.replaceOption.checked,e.$syncOptions()}},{name:"searchInSelection",exec:function(e){e.searchOption.checked=!e.searchRange,e.setSearchRange(e.searchOption.checked&&e.editor.getSelectionRange()),e.$syncOptions()}}]),this.setSearchRange=function(e){this.searchRange=e,e?this.searchRangeMarker=this.editor.session.addMarker(e,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(e){r.setCssClass(this.replaceOption,"checked",this.searchRange),r.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"keyboard_arrow_up":"keyboard_arrow_down",r.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),r.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),r.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var t=this.editor.getReadOnly();this.replaceOption.style.display=t?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!t?"":"none",this.find(!1,!1,e),this.alignContainer()},this.ALIGN_ABOVE=!0,this.ALIGN_NONE=null,this.ALIGN_BELOW=!1,this.align="top",this.alignContainer=function(e){this.$scrollMargin||(this.$scrollMargin={});if(e==1||e===null)this.align="top",this.$scrollMargin.bottom=0,this.editor.renderer.$minViewMarginBottom=0;if(e==0||e===null)this.align="bottom",this.$scrollMargin.top=0,this.editor.renderer.$minViewMarginTop=0;e===null&&(this.align=!1,this.active&&this.editor.renderer.removeScrollMargin(this.$scrollMargin));if(!this.active)return;if(this.align){var t=this.element.clientHeight+5;if(this.align=="top"){if(e==1||t!=this.$scrollMargin.top)this.editor.renderer.$minViewMarginTop=t,this.$scrollMargin.top=t,this.editor.renderer.addScrollMargin(this.$scrollMargin)}else this.align=="bottom"&&(e==0||t!=this.$scrollMargin.bottom)&&(this.editor.renderer.$minViewMarginBottom=t,this.$scrollMargin.bottom=t,this.editor.renderer.addScrollMargin(this.$scrollMargin))}},this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(e,t,n){try{var i=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:n,range:this.searchRange});r.setCssClass(this.searchBox,"ace_bad_regex",!1);var s=!i&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",s),this.editor._emit("findSearchBox",{match:!s}),this.highlight()}catch(o){r.setCssClass(this.searchBox,"ace_bad_regex",!0),r.setCssClass(this.searchBox,"ace_nomatch",!1)}this.updateCounter()},this.updateCounter=function(){var e=this.editor,t=e.$search.$options.re,n=0,r=0;if(t){var i=this.searchRange?e.session.getTextRange(this.searchRange):e.getValue(),s=e.session.doc.positionToIndex(e.selection.anchor);this.searchRange&&(s-=e.session.doc.positionToIndex(this.searchRange.start));var o=t.lastIndex=0,u;while(u=t.exec(i)){n++,o=u.index,o<=s&&r++;if(n>f)break;if(!u[0]){t.lastIndex=o+=1;if(o>=i.length)break}}}this.searchCounter.textContent=r+" of "+(n>f?f+"+":n)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var e=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),t=!e&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",t),this.editor._emit("findSearchBox",{match:!t}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.searchOption.checked=!1,this.editor.off("changeSession",this.setSession),this.$scrollMargin&&(this.editor.renderer.removeScrollMargin(this.$scrollMargin),this.$scrollMargin=null,this.editor.renderer.$minViewMarginTop=0,this.editor.renderer.$minViewMarginBottom=0),this.searchHistory.currentItem=null,this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(e,t){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=t,e&&(this.searchInput.value=e,this.searchHistory.push(0,this)),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var e=document.activeElement;return e==this.searchInput||e==this.replaceInput}}).call(l.prototype),t.SearchBox=l,t.Search=function(e,t){var n=e.searchBox||new l(e),r=e.selection.getRange(),i=e.session.getTextRange(r);if(r.end.row-r.start.row>10||i.length>100)n.setSearchRange(null),n.searchOption.checked=!0,n.setSearchRange(r),n.$syncOptions(),r="";n.show(i,t)}});
                (function() {
                    ace.require(["ace/ext/searchbox"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            